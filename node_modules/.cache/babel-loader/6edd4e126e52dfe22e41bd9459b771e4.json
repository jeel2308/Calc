{"ast":null,"code":"//import React from 'react';\nfunction updateState(obj, name) {\n  // console.log(name === \"CE\");\n  let obj2 = Object.assign({}, obj);\n\n  if (isNaN(Number(name)) && name !== \".\") {\n    obj2 = state.updateOperation(name, obj);\n  } else {\n    obj2 = state.operands(name, obj);\n  }\n\n  return obj2;\n}\n\nlet ops = {\n  \"+\": (num1, num2) => num1 + num2,\n  \"*\": (num1, num2) => num1 * num2,\n  \"/\": (num1, num2) => num2 === 0 ? \"Err\" : num1 / num2,\n  \"-\": (num1, num2) => num1 - num2,\n  \"%\": (num1, num2) => num1 % num2,\n  Usqrt: num1 => Math.sqrt(num1),\n  AC: obj => {\n    obj.op1 = \"0\";\n    obj.op2 = obj.operation = obj.warning = null;\n  },\n  CE: str => str.substr(0, str.length - 1),\n  calculate: (obj, name) => {\n    let obj2 = Object.assign({}, obj);\n    if (!name) obj2.op1 = \"\" + ops[obj2.operation](Number(obj2.op2), Number(obj2.op1));else obj2.op1 = \"\" + ops[name](Number(obj2.op1));\n    return obj2;\n  }\n};\nlet state = {\n  next_op: 1,\n  warning: false,\n  //done: false,\n  operands: (name, obj) => {\n    let obj2 = Object.assign({}, obj);\n    if (!state.warning) if (state.next_op) {\n      if (name === \".\") obj2.op1 = \"0.\";else obj2.op1 = name;\n      state.next_op = 0;\n    } else {\n      if (obj2.op1 === 0) {\n        if (name === \".\") obj2.op1 = \"0.\";else obj2.op1 = name;\n      } else obj2.op1 = obj2.op1 + name;\n    }\n    return obj2;\n  },\n  updateOperation: (name, obj) => {\n    let obj2 = Object.assign({}, obj);\n\n    if (!state.warning || state.warning && name === \"AC\") {\n      if (name === \"AC\") {\n        ops[name](obj2);\n        state.next_op = 1;\n      } else if (name === \"=\") {\n        if (!state.next_op && obj2.operation) {\n          obj2 = ops.calculate(obj2);\n          if (obj2.op1 = \"Err\") state.warning = true;\n        }\n\n        obj2.op2 = obj2.operation = null;\n        state.next_op = 1;\n      } else if (name === \"CE\") {\n        if (!state.next_op) {\n          obj2.op1 = ops[name](obj2.op1);\n          if (obj2.op1 === \"\") obj2.op1 = 0;\n        }\n      } else if (name[0] === \"U\") obj2.op1 = ops[name](obj2.op1);else {\n        if (obj2.operation === null) {\n          obj2.operation = name;\n          obj2.op2 = obj2.op1;\n          obj2.op1 = \"0\";\n          state.next_op = 1;\n        } else {\n          if (!state.next_op) {\n            obj2 = ops.calculate(obj2);\n\n            if (state.warning) {\n              obj2.op1 = \"0\";\n              obj2.op2 = obj2.operation = null;\n            } else {\n              obj2.operation = name;\n              obj2.op2 = obj2.op1;\n            }\n\n            state.next_op = 1;\n            obj2.op1 = \"0\";\n          } else {\n            obj2.operation = name;\n            state.next_op = 1;\n          }\n        }\n      }\n    }\n\n    return obj2;\n  }\n};\nexport default updateState;","map":{"version":3,"sources":["C:/Users/vatsal/Documents/React/calculator/src/Calculate.js"],"names":["updateState","obj","name","obj2","Object","assign","isNaN","Number","state","updateOperation","operands","ops","num1","num2","Usqrt","Math","sqrt","AC","op1","op2","operation","warning","CE","str","substr","length","calculate","next_op"],"mappings":"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","sourcesContent":["//import React from 'react';\r\nfunction updateState(obj, name) {\r\n  // console.log(name === \"CE\");\r\n  let obj2 = Object.assign({}, obj);\r\n\r\n  if (isNaN(Number(name)) && name !== \".\") {\r\n    obj2 = state.updateOperation(name, obj);\r\n  } else {\r\n    obj2 = state.operands(name, obj);\r\n  }\r\n  return obj2;\r\n}\r\n\r\nlet ops = {\r\n  \"+\": (num1, num2) => num1 + num2,\r\n  \"*\": (num1, num2) => num1 * num2,\r\n  \"/\": (num1, num2) => (num2 === 0 ? \"Err\" : num1 / num2),\r\n\r\n  \"-\": (num1, num2) => num1 - num2,\r\n  \"%\": (num1, num2) => num1 % num2,\r\n  Usqrt: num1 => Math.sqrt(num1),\r\n  AC: obj => {\r\n    obj.op1 = \"0\";\r\n    obj.op2 = obj.operation = obj.warning = null;\r\n  },\r\n  CE: str => str.substr(0, str.length - 1),\r\n  calculate: (obj, name) => {\r\n    let obj2 = Object.assign({}, obj);\r\n    if (!name)\r\n      obj2.op1 = \"\" + ops[obj2.operation](Number(obj2.op2), Number(obj2.op1));\r\n    else obj2.op1 = \"\" + ops[name](Number(obj2.op1));\r\n    return obj2;\r\n  }\r\n};\r\n\r\nlet state = {\r\n  next_op: 1,\r\n  warning: false,\r\n  //done: false,\r\n  operands: (name, obj) => {\r\n    let obj2 = Object.assign({}, obj);\r\n    if (!state.warning)\r\n      if (state.next_op) {\r\n        if (name === \".\") obj2.op1 = \"0.\";\r\n        else obj2.op1 = name;\r\n        state.next_op = 0;\r\n      } else {\r\n        if (obj2.op1 === 0)\r\n          if (name === \".\") obj2.op1 = \"0.\";\r\n          else obj2.op1 = name;\r\n        else obj2.op1 = obj2.op1 + name;\r\n      }\r\n    return obj2;\r\n  },\r\n  updateOperation: (name, obj) => {\r\n    let obj2 = Object.assign({}, obj);\r\n    if (!state.warning || (state.warning && name === \"AC\")) {\r\n      if (name === \"AC\") {\r\n        ops[name](obj2);\r\n        state.next_op = 1;\r\n      } else if (name === \"=\") {\r\n        if (!state.next_op && obj2.operation) {\r\n          obj2 = ops.calculate(obj2);\r\n          if ((obj2.op1 = \"Err\")) state.warning = true;\r\n        }\r\n        obj2.op2 = obj2.operation = null;\r\n        state.next_op = 1;\r\n      } else if (name === \"CE\") {\r\n        if (!state.next_op) {\r\n          obj2.op1 = ops[name](obj2.op1);\r\n          if (obj2.op1 === \"\") obj2.op1 = 0;\r\n        }\r\n      } else if (name[0] === \"U\") obj2.op1 = ops[name](obj2.op1);\r\n      else {\r\n        if (obj2.operation === null) {\r\n          obj2.operation = name;\r\n          obj2.op2 = obj2.op1;\r\n          obj2.op1 = \"0\";\r\n          state.next_op = 1;\r\n        } else {\r\n          if (!state.next_op) {\r\n            obj2 = ops.calculate(obj2);\r\n            if (state.warning) {\r\n              obj2.op1 = \"0\";\r\n              obj2.op2 = obj2.operation = null;\r\n            } else {\r\n              obj2.operation = name;\r\n              obj2.op2 = obj2.op1;\r\n            }\r\n            state.next_op = 1;\r\n            obj2.op1 = \"0\";\r\n          } else {\r\n            obj2.operation = name;\r\n            state.next_op = 1;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return obj2;\r\n  }\r\n};\r\n\r\nexport default updateState;\r\n"]},"metadata":{},"sourceType":"module"}
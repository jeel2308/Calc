{"ast":null,"code":"function updateState(obj, name) {\n  console.log(name);\n\n  if (isNaN(Number(name)) && name !== \".\") {\n    state.updateOperation(name, obj);\n  } else {\n    state.operands(name, obj);\n  }\n\n  return obj;\n}\n\nlet ops = {\n  \"+\": (num1, num2) => num1 + num2,\n  \"*\": (num1, num2) => num1 * num2,\n  \"/\": (num1, num2) => num2 === 0 ? \"Err\" : num1 / num2,\n  \"-\": (num1, num2) => num1 - num2,\n  \"%\": (num1, num2) => num1 % num2,\n  Usqrt: num1 => Math.sqrt(num1),\n  AC: obj => {\n    obj.op1 = \"0\";\n    obj.op2 = obj.operation = null;\n  },\n  CE: str => str.substr(0, str.length - 1),\n  calculate: (obj, name) => {\n    if (!name) obj.op1 = \"\" + ops[obj.operation](Number(obj.op2), Number(obj.op1));else obj.op1 = \"\" + ops[name](Number(obj.op1));\n  }\n};\nlet state = {\n  next_op: 1,\n  warning: false,\n  //done: false,\n  operands: (name, obj) => {\n    // if (!state.warning)\n    if (state.next_op) {\n      if (name === \".\") obj.op1 = \"0.\";else obj.op1 = name;\n      state.next_op = 0;\n    } else {\n      if (obj.op1 === 0) {\n        if (name === \".\") obj.op1 = \"0.\";else obj.op1 = name;\n      } else obj.op1 = obj.op1 + name;\n    }\n  },\n  updateOperation: (name, obj) => {\n    // if (!state.warning || (state.warning && name === \"AC\")) {\n    if (name === \"AC\") {\n      console.log(\"AC\");\n      state.warning = false;\n      ops[name](obj);\n      state.next_op = 1;\n    } else if (name === \"=\") {\n      if (!state.next_op && obj.operation) {\n        ops.calculate(obj);\n        if (obj.op1 === \"Err\") state.warning = true;\n      } else if (state.next_op && obj.operation) obj.op1 = obj.op2;\n\n      obj.op2 = obj.operation = null;\n      state.next_op = 1;\n    } else if (name === \"CE\") {\n      obj.op1 = ops[name](obj.op1);\n      if (obj.op1 === \"\") obj.op1 = 0;\n    } else if (name[0] === \"U\") obj.op1 = ops[name](obj.op1);else {\n      if (obj.operation === null) {\n        obj.operation = name;\n        obj.op2 = obj.op1;\n        obj.op1 = null;\n        state.next_op = 1;\n      } else {\n        if (!state.next_op) {\n          ops.calculate(obj);\n\n          if (state.warning) {\n            obj.op1 = null;\n            obj.op2 = obj.operation = null;\n          } else {\n            obj.operation = name;\n            obj.op2 = obj.op1;\n          }\n\n          state.next_op = 1;\n          obj.op1 = null;\n        } else {\n          obj.operation = name;\n          state.next_op = 1;\n        }\n      }\n    } // }\n\n  }\n};\nexport default updateState;","map":{"version":3,"sources":["C:/Users/vatsal/Documents/React/calculator/src/Calculate.js"],"names":["updateState","obj","name","console","log","isNaN","Number","state","updateOperation","operands","ops","num1","num2","Usqrt","Math","sqrt","AC","op1","op2","operation","CE","str","substr","length","calculate","next_op","warning"],"mappings":"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","sourcesContent":["function updateState(obj, name) {\r\n  console.log(name);\r\n  if (isNaN(Number(name)) && name !== \".\") {\r\n    state.updateOperation(name, obj);\r\n  } else {\r\n    state.operands(name, obj);\r\n  }\r\n  return obj;\r\n}\r\n\r\nlet ops = {\r\n  \"+\": (num1, num2) => num1 + num2,\r\n  \"*\": (num1, num2) => num1 * num2,\r\n  \"/\": (num1, num2) => (num2 === 0 ? \"Err\" : num1 / num2),\r\n\r\n  \"-\": (num1, num2) => num1 - num2,\r\n  \"%\": (num1, num2) => num1 % num2,\r\n  Usqrt: num1 => Math.sqrt(num1),\r\n  AC: obj => {\r\n    obj.op1 = \"0\";\r\n    obj.op2 = obj.operation = null;\r\n  },\r\n  CE: str => str.substr(0, str.length - 1),\r\n  calculate: (obj, name) => {\r\n    if (!name)\r\n      obj.op1 = \"\" + ops[obj.operation](Number(obj.op2), Number(obj.op1));\r\n    else obj.op1 = \"\" + ops[name](Number(obj.op1));\r\n  }\r\n};\r\n\r\nlet state = {\r\n  next_op: 1,\r\n  warning: false,\r\n  //done: false,\r\n  operands: (name, obj) => {\r\n    // if (!state.warning)\r\n    if (state.next_op) {\r\n      if (name === \".\") obj.op1 = \"0.\";\r\n      else obj.op1 = name;\r\n      state.next_op = 0;\r\n    } else {\r\n      if (obj.op1 === 0)\r\n        if (name === \".\") obj.op1 = \"0.\";\r\n        else obj.op1 = name;\r\n      else obj.op1 = obj.op1 + name;\r\n    }\r\n  },\r\n  updateOperation: (name, obj) => {\r\n    // if (!state.warning || (state.warning && name === \"AC\")) {\r\n    if (name === \"AC\") {\r\n      console.log(\"AC\");\r\n      state.warning = false;\r\n      ops[name](obj);\r\n      state.next_op = 1;\r\n    } else if (name === \"=\") {\r\n      if (!state.next_op && obj.operation) {\r\n        ops.calculate(obj);\r\n        if (obj.op1 === \"Err\") state.warning = true;\r\n      } else if (state.next_op && obj.operation) obj.op1 = obj.op2;\r\n      obj.op2 = obj.operation = null;\r\n      state.next_op = 1;\r\n    } else if (name === \"CE\") {\r\n      obj.op1 = ops[name](obj.op1);\r\n      if (obj.op1 === \"\") obj.op1 = 0;\r\n    } else if (name[0] === \"U\") obj.op1 = ops[name](obj.op1);\r\n    else {\r\n      if (obj.operation === null) {\r\n        obj.operation = name;\r\n        obj.op2 = obj.op1;\r\n        obj.op1 = null;\r\n        state.next_op = 1;\r\n      } else {\r\n        if (!state.next_op) {\r\n          ops.calculate(obj);\r\n          if (state.warning) {\r\n            obj.op1 = null;\r\n            obj.op2 = obj.operation = null;\r\n          } else {\r\n            obj.operation = name;\r\n            obj.op2 = obj.op1;\r\n          }\r\n          state.next_op = 1;\r\n          obj.op1 = null;\r\n        } else {\r\n          obj.operation = name;\r\n          state.next_op = 1;\r\n        }\r\n      }\r\n    }\r\n    // }\r\n  }\r\n};\r\n\r\nexport default updateState;\r\n"]},"metadata":{},"sourceType":"module"}
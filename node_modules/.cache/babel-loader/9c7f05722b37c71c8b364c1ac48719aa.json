{"ast":null,"code":"function updateState(obj, name) {\n  if (isNaN(Number(name)) && name !== \".\") {\n    state.updateOperation(name, obj);\n  } else {\n    state.operands(name, obj);\n  }\n\n  return obj;\n}\n\nlet ops = {\n  \"+\": (num1, num2) => {\n    let id1 = num1.indexOf(\".\");\n    let id2 = num2.indexOf(\".\");\n    if (id1 !== -1) id1 = num1.length - 1 - id1;\n    if (id2 !== -1) id2 = num2.length - 1 - id2;\n    id1 = id1 >= id2 ? id1 : id2;\n    num1 = Number(num1);\n    num2 = Number(num2);\n    let num3 = num1 + num2;\n    if (id1 !== -1) return num3.toFixed(id1);else return num3; //return num1 + num2;\n  },\n  \"*\": (num1, num2) => {\n    return num1 * num2;\n  },\n  \"/\": (num1, num2) => num2 == 0 ? \"Err\" : num1 / num2,\n  \"-\": (num1, num2) => {\n    let id1 = num1.indexOf(\".\");\n    let id2 = num2.indexOf(\".\");\n    if (id1 !== -1) id1 = num1.length - 1 - id1;\n    if (id2 !== -1) id2 = num2.length - 1 - id2;\n    id1 = id1 >= id2 ? id1 : id2;\n    num1 = Number(num1);\n    num2 = Number(num2);\n    let num3 = num1 - num2;\n    if (id1 !== -1) return num3.toFixed(id1);else return num3; // return num1 - num2;\n  },\n  \"%\": (num1, num2) => num1 % num2,\n  Usqrt: num1 => Math.sqrt(num1),\n  AC: obj => {\n    obj.op1 = null;\n    obj.op2 = obj.operation = null;\n  },\n  CE: str => str.substr(0, str.length - 1),\n  calculate: (obj, name) => {\n    if (!name) obj.op1 = \"\" + ops[obj.operation](obj.op2, obj.op1);else obj.op1 = \"\" + ops[name](Number(obj.op1));\n  }\n};\nlet state = {\n  next_op: 1,\n  warning: false,\n  //done: false,\n  operands: (name, obj) => {\n    if (!state.warning) {\n      if (state.next_op) {\n        if (name === \".\") obj.op1 = \"0.\";else obj.op1 = name;\n        state.next_op = 0;\n      } else {\n        if (obj.op1 === null) {\n          if (name === \".\") obj.op1 = \"0.\";else obj.op1 = name;\n        } else obj.op1 = obj.op1 + name;\n      }\n    }\n  },\n  updateOperation: (name, obj) => {\n    if (!state.warning || name === \"AC\" || name === \"Delete\") {\n      if (name === \"AC\" || name === \"Delete\") {\n        ops.AC(obj);\n        state.next_op = 1;\n      } else if (name === \"=\" || name === \"Enter\") {\n        if (!state.next_op && obj.operation) {\n          ops.calculate(obj);\n          if (obj.op1 === \"Err\") state.warning = true;\n        } else if (state.next_op && obj.operation) obj.op1 = obj.op2;\n\n        obj.op2 = obj.operation = null;\n        state.next_op = 1;\n      } else if (name === \"CE\" || name === \"Backspace\") {\n        if (obj.op1) obj.op1 = ops.CE(obj.op1);\n        if (obj.op1 === \"\") obj.op1 = null;\n      } else if (name[0] === \"U\") {\n        if (obj.op1) obj.op1 = ops[name](obj.op1);\n      } else {\n        if (obj.operation === null) {\n          obj.operation = name;\n          obj.op2 = obj.op1;\n          obj.op1 = null;\n          state.next_op = 1;\n        } else {\n          if (!state.next_op) {\n            ops.calculate(obj);\n\n            if (obj.op1 === \"Err\") {\n              obj.op2 = obj.operation = null;\n              state.warning = true;\n            } else {\n              obj.operation = name;\n              obj.op2 = obj.op1;\n              obj.op1 = null;\n            }\n\n            state.next_op = 1;\n          } else {\n            obj.operation = name;\n            state.next_op = 1;\n          }\n        }\n      }\n    }\n  }\n};\nexport default updateState;","map":{"version":3,"sources":["C:/Users/vatsal/Documents/React/calculator/src/Calculate.js"],"names":["updateState","obj","name","isNaN","Number","state","updateOperation","operands","ops","num1","num2","id1","indexOf","id2","length","num3","toFixed","Usqrt","Math","sqrt","AC","op1","op2","operation","CE","str","substr","calculate","next_op","warning"],"mappings":"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","sourcesContent":["function updateState(obj, name) {\r\n  if (isNaN(Number(name)) && name !== \".\") {\r\n    state.updateOperation(name, obj);\r\n  } else {\r\n    state.operands(name, obj);\r\n  }\r\n  return obj;\r\n}\r\n\r\nlet ops = {\r\n  \"+\": (num1, num2) => {\r\n    let id1 = num1.indexOf(\".\");\r\n    let id2 = num2.indexOf(\".\");\r\n    if (id1 !== -1) id1 = num1.length - 1 - id1;\r\n    if (id2 !== -1) id2 = num2.length - 1 - id2;\r\n    id1 = id1 >= id2 ? id1 : id2;\r\n    num1 = Number(num1);\r\n    num2 = Number(num2);\r\n    let num3 = num1 + num2;\r\n    if (id1 !== -1) return num3.toFixed(id1);\r\n    else return num3;\r\n    //return num1 + num2;\r\n  },\r\n  \"*\": (num1, num2) => {\r\n    return num1 * num2;\r\n  },\r\n  \"/\": (num1, num2) => (num2 == 0 ? \"Err\" : num1 / num2),\r\n\r\n  \"-\": (num1, num2) => {\r\n    let id1 = num1.indexOf(\".\");\r\n    let id2 = num2.indexOf(\".\");\r\n    if (id1 !== -1) id1 = num1.length - 1 - id1;\r\n    if (id2 !== -1) id2 = num2.length - 1 - id2;\r\n    id1 = id1 >= id2 ? id1 : id2;\r\n    num1 = Number(num1);\r\n    num2 = Number(num2);\r\n    let num3 = num1 - num2;\r\n    if (id1 !== -1) return num3.toFixed(id1);\r\n    else return num3;\r\n    // return num1 - num2;\r\n  },\r\n  \"%\": (num1, num2) => num1 % num2,\r\n  Usqrt: num1 => Math.sqrt(num1),\r\n  AC: obj => {\r\n    obj.op1 = null;\r\n    obj.op2 = obj.operation = null;\r\n  },\r\n  CE: str => str.substr(0, str.length - 1),\r\n  calculate: (obj, name) => {\r\n    if (!name) obj.op1 = \"\" + ops[obj.operation](obj.op2, obj.op1);\r\n    else obj.op1 = \"\" + ops[name](Number(obj.op1));\r\n  }\r\n};\r\n\r\nlet state = {\r\n  next_op: 1,\r\n  warning: false,\r\n  //done: false,\r\n  operands: (name, obj) => {\r\n    if (!state.warning) {\r\n      if (state.next_op) {\r\n        if (name === \".\") obj.op1 = \"0.\";\r\n        else obj.op1 = name;\r\n        state.next_op = 0;\r\n      } else {\r\n        if (obj.op1 === null) {\r\n          if (name === \".\") obj.op1 = \"0.\";\r\n          else obj.op1 = name;\r\n        } else obj.op1 = obj.op1 + name;\r\n      }\r\n    }\r\n  },\r\n  updateOperation: (name, obj) => {\r\n    if (!state.warning || name === \"AC\" || name === \"Delete\") {\r\n      if (name === \"AC\" || name === \"Delete\") {\r\n        ops.AC(obj);\r\n        state.next_op = 1;\r\n      } else if (name === \"=\" || name === \"Enter\") {\r\n        if (!state.next_op && obj.operation) {\r\n          ops.calculate(obj);\r\n          if (obj.op1 === \"Err\") state.warning = true;\r\n        } else if (state.next_op && obj.operation) obj.op1 = obj.op2;\r\n        obj.op2 = obj.operation = null;\r\n        state.next_op = 1;\r\n      } else if (name === \"CE\" || name === \"Backspace\") {\r\n        if (obj.op1) obj.op1 = ops.CE(obj.op1);\r\n        if (obj.op1 === \"\") obj.op1 = null;\r\n      } else if (name[0] === \"U\") {\r\n        if (obj.op1) obj.op1 = ops[name](obj.op1);\r\n      } else {\r\n        if (obj.operation === null) {\r\n          obj.operation = name;\r\n          obj.op2 = obj.op1;\r\n          obj.op1 = null;\r\n          state.next_op = 1;\r\n        } else {\r\n          if (!state.next_op) {\r\n            ops.calculate(obj);\r\n\r\n            if (obj.op1 === \"Err\") {\r\n              obj.op2 = obj.operation = null;\r\n              state.warning = true;\r\n            } else {\r\n              obj.operation = name;\r\n              obj.op2 = obj.op1;\r\n              obj.op1 = null;\r\n            }\r\n            state.next_op = 1;\r\n          } else {\r\n            obj.operation = name;\r\n            state.next_op = 1;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nexport default updateState;\r\n"]},"metadata":{},"sourceType":"module"}
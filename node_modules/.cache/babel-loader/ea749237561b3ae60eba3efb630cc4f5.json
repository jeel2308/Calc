{"ast":null,"code":"//import React from 'react';\nfunction updateState(obj, name) {\n  let obj2 = Object.assign({}, obj);\n  if (!obj2.warning || obj2.warning && name === \"AC\") if (isNaN(Number(name)) && name !== \".\") {\n    obj2 = state.updateOperation(name, obj);\n  } else {\n    obj2 = state.operands(name, obj);\n  } //   if (name === \"=\") {\n  //     if (obj2.operation && obj2.op1) {\n  //       obj2 = ops.calculate(obj2);\n  //       if (obj2.warning){\n  //         obj2.op2 = obj2.operation  = null;\n  //         obj2.final = \"done\";\n  //         obj2.op1 = 0;\n  //       }\n  //       else {\n  //         obj2.final = \"done\";\n  //         obj2.op2 = obj2.operation = null;\n  //       }\n  //     }\n  //      else if (!obj2.op1 && obj2.operation) {\n  //       obj2.op2 = obj2.operation = null;\n  //       obj2.op1 = 0;\n  //       obj2.final = \"Done\";\n  //       obj2.warning = \"missing second operand\";\n  //     }\n  //   }\n  //    else if (name === \"CE\") {\n  //     obj2.op1 = 0;\n  //   }\n  //    else if (name === \"C\") {\n  //     obj2.op1 = obj2.op1.substr(0, obj2.op1.length - 1);\n  //   }\n  //    else if (name[0] === \"U\") {\n  //     if (obj2.op1) {\n  //       obj2 = ops.calculate(obj2, name);\n  //       if (!obj2.op2)\n  //         obj2.final = \"Done\";\n  //     }\n  //      else {\n  //       obj2.op2 = obj2.operation = null;\n  //       obj2.op1 = 0;\n  //       obj2.final = \"Done\";\n  //       obj2.warning = \"missing operand\";\n  //     }\n  //   }\n  //    else if (obj2.operation === null) {\n  //     obj2.op2 = obj2.op1;\n  //     obj2.warning = \"\";\n  //     obj2.op1 = null;\n  //     obj2.operation = name;\n  //   }\n  //    else {\n  //     if (obj2.op1) {\n  //       obj2 = ops.calculate(obj2);\n  //       if (obj2.warning) {\n  //         obj2.op2 = obj2.final = obj2.operation = null;\n  //         obj2.op1 = 0;\n  //       }\n  //       else {\n  //         obj2.op2 = obj2.op1;\n  //         obj2.op1 = null;\n  //         obj2.operation = name;\n  //       }\n  //     }\n  //      else {\n  //       obj2.op2 = obj2.operation = null;\n  //       obj2.op1 = 0;\n  //       obj2.final = \"Done\";\n  //       obj2.warning = \"missing second operand\";\n  //     }\n  //   }\n  // }\n  //  else if (!isNaN(Number(name))) {\n  //   if (!obj2.op1  || obj2.final) {\n  //     obj2.op1 = name;\n  //     obj2.final = 0;\n  //     obj2.warning = null;\n  //   }\n  //    else\n  //     obj2.op1 = obj2.op1 + name;\n  // }\n  //  else {\n  //   if (obj2.op1 === null)\n  //     obj2.op1 = \"0.\";\n  //   else\n  //     obj2.op1 = obj2.op1 + \".\";\n  // }\n\n  return obj2;\n}\n\nlet ops = {\n  \"+\": function (num1, num2) {\n    return num1 + num2;\n  },\n  \"*\": function (num1, num2) {\n    return num1 * num2;\n  },\n  \"/\": function (num1, num2) {\n    if (num2 === 0) return \"Err\";\n    return num1 / num2;\n  },\n  \"-\": function (num1, num2) {\n    return num1 - num2;\n  },\n  \"%\": function (num1, num2) {\n    return num1 % num2;\n  },\n  \"Usqrt\": function (num1) {\n    return Math.sqrt(num1);\n  },\n  \"AC\": function (obj) {\n    obj.op1 = 0;\n    obj.op2 = obj.operation = obj.warning = null;\n  },\n  \"CE\": function (str) {\n    return str.substr(0, str.length - 1);\n  },\n  \"calculate\": function (obj, name) {\n    let obj2 = Object.assign({}, obj);\n    if (!name) obj2.op1 = \"\" + ops[obj2.operation](Number(obj2.op2), Number(obj2.op1));else obj2.op1 = \"\" + ops[name](Number(obj2.op1));\n\n    if (obj2.op1 === \"Err\") {\n      obj2.warning = \"Err\";\n    }\n\n    return obj2;\n  }\n};\nlet state = {\n  next_op: 1,\n  //done: false,\n  operands: function (name, obj) {\n    let obj2 = Object.assign({}, obj);\n    if (!obj2.warning) if (state.next_op) {\n      if (name === \".\") obj2.op1 = \"0.\";else obj2.op1 = name;\n      state.next_op = 0;\n      obj2.warning = \"\";\n    } else obj2.op1 = obj2.op1 + name;\n    return obj2;\n  },\n  updateOperation: function (name, obj) {\n    let obj2 = Object.assign({}, obj);\n\n    if (name === \"AC\") {\n      ops[name](obj2);\n      state.next_op = 1;\n    } else if (name === \"=\") {\n      if (!state.next_op && obj2.operation) {\n        obj2 = ops.calculate(obj2);\n\n        if (obj2.warning) {\n          obj2.op1 = 0;\n        }\n\n        obj2.op2 = obj2.operation = null;\n        state.next_op = 1;\n      }\n    } else if (name === \"CE\" || name[0] === 'U') obj2.op1 = ops[name](obj2.op1);else {\n      if (obj2.operation === null) {\n        obj2.operation = name;\n        obj2.op2 = obj2.op1;\n        state.next_op = 1;\n      } else {\n        if (!state.next_op) {\n          obj2 = ops.calculate(obj2);\n\n          if (obj2.warning) {\n            obj2.op1 = 0;\n            obj2.op2 = obj2.operation = null;\n          } else {\n            obj2.operation = name;\n            obj2.op2 = obj2.op1;\n          }\n\n          state.next_op = 1;\n        } else {\n          obj2.operation = name;\n          state.next_op = 1;\n        }\n      }\n    }\n\n    return obj2;\n  }\n};\nexport default updateState;","map":{"version":3,"sources":["C:/Users/vatsal/Documents/React/calculator/src/Calculate.js"],"names":["updateState","obj","name","obj2","Object","assign","warning","isNaN","Number","state","updateOperation","operands","ops","num1","num2","Math","sqrt","op1","op2","operation","str","substr","length","next_op","calculate"],"mappings":"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","sourcesContent":["//import React from 'react';\r\nfunction updateState(obj, name) {\r\n   let obj2 = Object.assign({}, obj);\r\n   if(!obj2.warning || (obj2.warning && name===\"AC\")) \r\n     if (isNaN(Number(name)) && name !== \".\") {\r\n       obj2 = state.updateOperation(name,obj);\r\n     }\r\n     else {\r\n        obj2 = state.operands(name,obj);\r\n    } \r\n   \r\n   \r\n  //   if (name === \"=\") {\r\n  //     if (obj2.operation && obj2.op1) {\r\n  //       obj2 = ops.calculate(obj2);\r\n  //       if (obj2.warning){\r\n  //         obj2.op2 = obj2.operation  = null;\r\n  //         obj2.final = \"done\";\r\n  //         obj2.op1 = 0;\r\n  //       }\r\n  //       else {\r\n  //         obj2.final = \"done\";\r\n  //         obj2.op2 = obj2.operation = null;\r\n  //       }\r\n  //     }\r\n  //      else if (!obj2.op1 && obj2.operation) {\r\n  //       obj2.op2 = obj2.operation = null;\r\n  //       obj2.op1 = 0;\r\n  //       obj2.final = \"Done\";\r\n  //       obj2.warning = \"missing second operand\";\r\n  //     }\r\n\r\n  //   }\r\n  //    else if (name === \"CE\") {\r\n  //     obj2.op1 = 0;\r\n  //   }\r\n  //    else if (name === \"C\") {\r\n  //     obj2.op1 = obj2.op1.substr(0, obj2.op1.length - 1);\r\n  //   }\r\n  //    else if (name[0] === \"U\") {\r\n  //     if (obj2.op1) {\r\n  //       obj2 = ops.calculate(obj2, name);\r\n  //       if (!obj2.op2)\r\n  //         obj2.final = \"Done\";\r\n  //     }\r\n  //      else {\r\n  //       obj2.op2 = obj2.operation = null;\r\n  //       obj2.op1 = 0;\r\n  //       obj2.final = \"Done\";\r\n  //       obj2.warning = \"missing operand\";\r\n  //     }\r\n  //   }\r\n  //    else if (obj2.operation === null) {\r\n  //     obj2.op2 = obj2.op1;\r\n  //     obj2.warning = \"\";\r\n  //     obj2.op1 = null;\r\n  //     obj2.operation = name;\r\n  //   }\r\n  //    else {\r\n  //     if (obj2.op1) {\r\n  //       obj2 = ops.calculate(obj2);\r\n  //       if (obj2.warning) {\r\n  //         obj2.op2 = obj2.final = obj2.operation = null;\r\n  //         obj2.op1 = 0;\r\n  //       }\r\n  //       else {\r\n  //         obj2.op2 = obj2.op1;\r\n  //         obj2.op1 = null;\r\n  //         obj2.operation = name;\r\n  //       }\r\n  //     }\r\n  //      else {\r\n  //       obj2.op2 = obj2.operation = null;\r\n  //       obj2.op1 = 0;\r\n  //       obj2.final = \"Done\";\r\n  //       obj2.warning = \"missing second operand\";\r\n  //     }\r\n  //   }\r\n  // }\r\n  //  else if (!isNaN(Number(name))) {\r\n  //   if (!obj2.op1  || obj2.final) {\r\n  //     obj2.op1 = name;\r\n  //     obj2.final = 0;\r\n  //     obj2.warning = null;\r\n  //   }\r\n  //    else\r\n  //     obj2.op1 = obj2.op1 + name;\r\n  // }\r\n  //  else {\r\n  //   if (obj2.op1 === null)\r\n  //     obj2.op1 = \"0.\";\r\n  //   else\r\n  //     obj2.op1 = obj2.op1 + \".\";\r\n  // }\r\n  return obj2;\r\n}\r\n\r\nlet ops = {\r\n  \"+\": function (num1, num2) {\r\n    return num1 + num2;\r\n  },\r\n  \"*\": function (num1, num2) {\r\n    return num1 * num2;\r\n  },\r\n  \"/\": function (num1, num2) {\r\n    if (num2 === 0)\r\n      return \"Err\";\r\n    return num1 / num2;\r\n  },\r\n  \"-\": function (num1, num2) {\r\n    return num1 - num2;\r\n  },\r\n  \"%\": function (num1, num2) {\r\n    return num1 % num2;\r\n  },\r\n  \"Usqrt\": function (num1) {\r\n    return Math.sqrt(num1);\r\n  },\r\n  \"AC\" : function(obj){\r\n     obj.op1 = 0;\r\n     obj.op2 = obj.operation = obj.warning = null;\r\n  },\r\n  \"CE\" : function(str) {\r\n    return str.substr(0,str.length-1);\r\n  },\r\n  \"calculate\": function (obj, name) {\r\n    let obj2 = Object.assign({}, obj);\r\n    if (!name)\r\n      obj2.op1 = \"\" + ops[obj2.operation](Number(obj2.op2), Number(obj2.op1));\r\n    else\r\n      obj2.op1 = \"\" + ops[name](Number(obj2.op1));\r\n    if (obj2.op1 === \"Err\") {\r\n      obj2.warning = \"Err\";\r\n    }\r\n    return obj2;\r\n  }\r\n}\r\n\r\n\r\n\r\nlet state = {\r\n  next_op: 1,\r\n  //done: false,\r\n  operands: function(name,obj){\r\n    let obj2 = Object.assign({},obj);\r\n    if(!obj2.warning)\r\n    if(state.next_op) {\r\n       if(name===\".\")\r\n        obj2.op1 = \"0.\";\r\n      else\r\n        obj2.op1 = name;\r\n       state.next_op = 0;\r\n       obj2.warning = \"\";\r\n    }\r\n    else\r\n       obj2.op1 = obj2.op1 + name;\r\n    return obj2;\r\n  },\r\n  updateOperation: function(name,obj){\r\n    let obj2 = Object.assign({},obj);\r\n    if(name===\"AC\"){\r\n      ops[name](obj2);\r\n      state.next_op = 1;\r\n    }\r\n    else if(name===\"=\"){\r\n      if(!state.next_op && obj2.operation){\r\n      obj2 = ops.calculate(obj2);\r\n      if(obj2.warning){\r\n        obj2.op1 = 0;\r\n      }\r\n      obj2.op2 = obj2.operation = null;\r\n      state.next_op = 1;\r\n    }\r\n  }\r\n    else if(name===\"CE\"||name[0]==='U')\r\n      obj2.op1 = ops[name](obj2.op1);\r\n    else{\r\n      if(obj2.operation===null){\r\n        obj2.operation = name;\r\n        obj2.op2 = obj2.op1;\r\n        state.next_op = 1;\r\n      }\r\n      else{\r\n        if(!state.next_op){\r\n          obj2 = ops.calculate(obj2);\r\n          if(obj2.warning){\r\n            obj2.op1 = 0;\r\n            obj2.op2 = obj2.operation = null;\r\n          }\r\n          else{\r\n            obj2.operation = name;\r\n            obj2.op2 = obj2.op1;\r\n          }\r\n          state.next_op = 1;\r\n        }\r\n         else{ \r\n          obj2.operation = name;\r\n          state.next_op = 1;\r\n         }\r\n       }\r\n    }\r\n    return obj2;\r\n  }\r\n}\r\n\r\nexport default updateState;"]},"metadata":{},"sourceType":"module"}